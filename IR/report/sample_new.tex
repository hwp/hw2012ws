%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8

%\documentclass[letterpaper, 10 pt, conference]{ieeeconf} % Comment this line out
                                                          % if you need a4paper
\documentclass[a4paper, 11pt, conference]{ieeeconf}       % Use this line for a4
                                                          % paper

\IEEEoverridecommandlockouts                              % This command is only
                                                          % needed if you want to
                                                          % use the \thanks command
\overrideIEEEmargins
% See the \addtolength command later in the file to balance the column lengths
% on the last page of the document

\usepackage{graphicx}
\graphicspath{{../data/}}

\usepackage{tikz}
\usetikzlibrary{shapes, arrows}

\title{\LARGE \bf
  ROS : Robotics Operating System
}

\author{
  Weipeng He
%\thanks{$^{1}$W. He is with Department of Informatics,
%        University of Hamburg, Vogt-K\"olln-Stra\ss e 30, Germany, 
%        {\tt\small 2he at informatik.uni-hamburg.de}}%
\\ Department of Informatics\\ University of Hamburg \\ {\tt\small 2he@informatik.uni-hamburg.de}
}

\begin{document}

\maketitle
\thispagestyle{empty}
\pagestyle{empty}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{abstract}
  ROS is a open-source middleware framework for developing robotics applications. It offers a large number of 
\end{abstract}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{INTRODUCTION}

Software system for robots is difficult to develop because of the diversity of hardware and fast growing of its scale. Different research groups write their software for various types of robots, hardware and drivers. The software architectures they chose also differ. All these facts make the codes in robotics hard to reuse. Because of low reusability, researchers, in some cases, need to write the codes from scratch. Furthermore, the low reusability makes it hard to reproduce the experimental results from different groups.

Robot Operating System (ROS) is a project that promotes the code reuse in robotics research\cite{quigley_ros:_2009}. ROS is an open-source, meta-operating system for robots. It provides the services including hardware abstraction, low-level device control, implementation of commonly-used functionality, message-passing between processes, and package management. It also provides tools and libraries for obtaining, building, writing, and running code across multiple computers. Last but not least, ROS is supported by a open-source community (ROS.org), which is a platform for researchers to use for collaborating.

ROS was started from 2007, and now it is widely used in research and industry of robotics. Originally, it was under the name switchyard by the Stanford Artificial Intelligence Laboratory in support of the Stanford AI Robot (STAIR) project. From 2008, its development continues primarily at Willow Garage, with more than twenty institutions collaborating in a federated development model. ROS has been released several times under different distribution names. The latest stable distribution release is ``ROS Groovy Galapagos'' on December 31, 2012\cite{_documentation_2013}.

Although the latest release of ROS is targeted at Ubuntu, it also works on other linux distributions as well as Mac OS X, Android, and Windows. ROS programs can be developed in multiple programming languages, that are C++, Python, Octave and Lisp. More importantly, ROS supports more than 80 diffrent kinds of robots. The popular robots, that are PR2, Care-O-bot 3, iRobot Create, Aldebaran Nao are all included.

ROS offers plentiful modules in its repositories. It is a direct benifit for researchers to use the code from ROS rather than write the code by themselves. For example, Figure \ref{fig:tf} shows the coordinate frames in PR2, a personal service robot. The numerous moving components as well as the vision sensors have different coordinate frames. The calculation of transformation between frames is complex but essential for controlling the robot. Although the task is complex, researchers can build their programs directly based on the tf package from ROS, which reduces their workload.

\begin{figure}[htpb]
  \centering
  \includegraphics[width=.4\textwidth]{tf_pr2}
  \caption{Coordinate frames in PR2. The tf package from ROS provides algorithms for calculating transformation between multiple frames (from \cite{_documentation_2013}).}
  \label{fig:tf}
\end{figure}

Previously, there were other robotics software frameworks used in academia and industry\cite{kramer_development_2007}. Each framework was designed for some special robots or for few special tasks. Among those frameworks, Player/Stage\cite{collett_player_2005} is most similar to ROS. It is also an open-source project, and offers modules for freqently-used robotics applications. Player/Stage fits for simple, non-articulated mobile platforms. ROS, however, is better at dealing with complex mobile manipulation platforms. Furthermore, ROS offers more implementations of robotics-related algorithms.

In later sections of this paper, we will introduce the design goals, software structure and the community management of ROS. 

\section{DESIGN GOALS}

ROS is designed to solve the challenges encountered when developing large-scale service robots\cite{quigley_ros:_2009}. Its design goals are listed as follow:
\begin{itemize}
  \item Peer-to-peer
  \item Tools-based
  \item Multi-lingual
  \item Thin
  \item Free and Open-Source
\end{itemize}

\subsection{Peer-to-Peer}

ROS is designed to work on multiple hosts and processes that are connected in a peer-to-peer topology. This design avoids the using of central server, which might cause problems when working on computers in a heterogenous network. A typical working environment of ROS is shown in Figure \ref{fig:network}.

\begin{figure}[htpb]
  \centering
  \includegraphics[width=0.4\textwidth]{network}
  \caption{A typical ROS network configuration (from \cite{quigley_ros:_2009}).}
  \label{fig:network}
\end{figure}

\subsection{Tools-based} 

ROS exploits a large number of light tools to manage the building, debugging and monitoring of the programs. ROS systems, which are complex combinations of different components, need these tools to make ROS easy to use for developers.

\subsection{Multi-lingual}

ROS currently supports four programming languages: C++, Python, Octave and Lisp. This adaptation of mulitple languages meets the different language preference of programmers. Using the preferred language will large shorten the programming time and make debuggin easy.

\subsection{Thin}

While excluding standalone libraries, the core functionality of ROS is considerably thin. Most standalone libraries including those fore drivers are independent to ROS. The design of the framework shows capability to adapt code from a number of other open-source projects. For example, ROS re-uses code for the drivers, navigation system, and simulators from the Player project, vision algorithms from OpenCV, and so on. Ease for unit testing is also an benifit for thin design.

\subsection{Free and Open-Source}

ROS is a fully open platform and distributed under BSD license. It is escpecially important for researchers in robotics to colaborate, as the hardwares and functions are highly complex. ROS offers the platform for researchers to share their implementations of robotics applications.

\section{SOFTWARE STRUCTURE}

\subsection{ROS Computation Graph}
The ROS runtime "graph" is a peer-to-peer network of processes using the ROS communication infrastructure.

\begin{figure}[htpb]
  \centering
  \begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=3cm,
                     thick,main node/.style={ellipse,draw,font=\ttfamily\small}]

  \node[main node] (1) {/gscam};
  \node[main node] (2) [below left of=1] {/object\_detect};
  \node[main node] (3) [below right of=1] {/image\_view};
  \node[main node] (4) [below of=3] {/rosout};
  \node[main node] (5) [below of=2] {/grasp};

  \path[every node/.style={font=\ttfamily\small}]
   (1) edge node {/image} (2)
       edge node {/image} (3)
   (2) edge node {/rosout} (4)
       edge node {/pos} (5)
   (3) edge node {/rosout} (4);
  \end{tikzpicture}
  \caption{Peer-to-peer computation graph under ROS framework.}
  \label{fig:framework}
\end{figure}



\textbf{Software Structure}
\textit{Node and Master}

\begin{itemize}
  \item Nodes are processes that perform computation. 
  \item ROS is designed to be modular at a fine-grained scale. Robot control system will usually comprise many nodes.
  \item For example, one node controls a laser range-finder, one node controls the wheel motors, one node performs localization, one node performs path planning, one node provides a graphical view of the system, and so on.
  \item Nodes get to know each other via roscore (master).
\end{itemize}

\begin{center}
  \includegraphics[width=.6\textwidth]{nodes}
\end{center}




\textbf{Software Structure}
\textit{Message}

\begin{itemize}
  \item Nodes communicate with each other by passing messages.
  \item A message is simply a data structure, comprising typed fields. 
  \item Standard primitive types (integer, floating point, boolean, etc.) are supported, as are arrays of primitive types. 
  \item Messages can include arbitrarily nested structures and arrays (much like C structs).
\end{itemize}



\textbf{Software Structure}
\textit{Message example}

\begin{itemize}
  \item sensor\_msg/Image
\end{itemize}

Header header \\
~  uint32 seq \\
~  time stamp \\
~  string frame\_id \\
uint32 height \\
uint32 width \\
string encoding \\
uint8 is\_bigendian \\
uint32 step \\
uint8[] data



\textbf{Software Structure}
\textit{Topic}

\begin{itemize}
  \item Topic is a mechanism to send messages from a node to one or more nodes.
  \item Follows a publisher-subscriber design pattern.
  \item Publisher is the node which send messages to the topic.
  \item Subscribers are the nodes which get called whenever a message is published.
  \item Example : Camera publishing images.
\end{itemize}

\begin{center}
  \includegraphics[width=.6\textwidth]{topic}
\end{center}




\textbf{Software Structure}
\textit{Service}

\begin{itemize}
  \item Service is a mechanism for a node to send a request to another node and receive a response in return.
  \item Follows a request-response design pattern.
  \item A service is called with a request message, and in return, a response message is returned.
  \item Example : Request the camera to tilt.
\end{itemize}

\begin{center}
  \includegraphics[width=.6\textwidth]{service}
\end{center}



\textbf{Software Structure}
\textit{File system Hierarchy}

\begin{itemize}
  \item Release : collection of stacks and packages.
  \begin{itemize}
    \item Fuerte
  \end{itemize}
  \item Stacks : a full application suite.
  \begin{itemize}
    \item geometry
  \end{itemize}
  \item Package : software to solve a specific task.
  \begin{itemize}
    \item tf
  \end{itemize}
  \item Node : an executable.
  \begin{itemize}
    \item tf\_echo
  \end{itemize}
\end{itemize}



\section{Community Management}

\textbf{Community}
\textit{Software Distribution}

\begin{itemize}
  \item ROS code is maintained in a decentralized federation of repositories.
  \begin{itemize}
    \item The core repository : ros-pkg;
    \item 94 repositories in other institutions;
    \item 14 personal repositories.
  \end{itemize}
  \item Easy to contribute.
  \begin{itemize}
    \item Host their code (and documents) in their own repository.
    \item SourceForge.net, Google Code and GitHub.
    \item Register at ros.org.
  \end{itemize}
  \item Easy to search software.
  \begin{itemize}
    \item Search across the federation of repositories is possible.
    \item ros.org keeps tracks of updates of all repositories and generates index.
    \item Documentation and tutorials are also updated automatically.
  \end{itemize}
\end{itemize}




\textbf{Community}

\begin{itemize}
  \item ROS Answers.
\end{itemize}
\begin{center}
  \includegraphics[width=\textwidth]{ros_answers}
\end{center}


\section{Conclusion}

\textbf{Conclusion}

\begin{itemize}
  \item ROS defines a standard for the communicate mechanisms and protocols between robot components.
  \item ROS provides libraries for various functions.
  \item ROS contains utility tools to help development.
  \item ROS promotes code sharing and reuse.
\end{itemize}

\textbf{Questions?}
Thanks!

\bibliography{ref}
\bibliographystyle{plain}  

\end{document}
